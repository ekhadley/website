<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frigbot Status</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
        }
        .header {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #444;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .status-indicator {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: inline-block;
        }
        .status-indicator.active {
            background-color: #4caf50;
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.6);
        }
        .status-indicator.inactive {
            background-color: #f44336;
            box-shadow: 0 0 8px rgba(244, 67, 54, 0.6);
        }
        .status-subhead {
            font-size: 14px;
            color: #b0b0b0;
            margin-bottom: 10px;
            font-weight: normal;
        }
        .nav-link {
            color: #4a9eff;
            text-decoration: none;
            font-size: 14px;
        }
        .nav-link:hover {
            text-decoration: underline;
        }
        .main-content {
            display: flex;
            gap: 20px;
            height: calc(100vh - 130px);
        }
        .left-sidebar {
            flex: 0 0 20%;
            overflow-y: auto;
            padding-right: 10px;
        }
        .filter-section {
            margin-bottom: 25px;
        }
        .filter-section h3 {
            font-size: 14px;
            color: #858585;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .search-box {
            width: 100%;
            padding: 8px 10px;
            background-color: #252526;
            border: 1px solid #444;
            border-radius: 3px;
            color: #d4d4d4;
            font-family: 'Courier New', Courier, monospace;
            font-size: 13px;
        }
        .search-box:focus {
            outline: none;
            border-color: #4a9eff;
        }
        .level-filter {
            display: flex;
            align-items: center;
            padding: 6px 0;
            cursor: pointer;
            user-select: none;
        }
        .level-filter:hover {
            opacity: 0.8;
        }
        .level-checkbox {
            width: 16px;
            height: 16px;
            margin-right: 10px;
            cursor: pointer;
        }
        .level-label {
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
            flex: 1;
        }
        .stats-display {
            font-size: 13px;
            color: #b0b0b0;
            padding: 10px 0;
            border-top: 1px solid #333;
            font-weight: 500;
        }
        .stats-display span {
            display: block;
            margin-bottom: 5px;
        }
        .clear-filters {
            padding: 6px 12px;
            background-color: #2d2d30;
            border: 1px solid #444;
            border-radius: 3px;
            color: #d4d4d4;
            cursor: pointer;
            font-size: 12px;
            font-family: 'Courier New', Courier, monospace;
            width: 100%;
            margin-top: 10px;
        }
        .clear-filters:hover {
            background-color: #3a3a3a;
        }
        .event-filter {
            display: flex;
            align-items: center;
            padding: 4px 0;
            cursor: pointer;
            user-select: none;
            font-size: 12px;
        }
        .event-filter:hover {
            opacity: 0.8;
        }
        .event-checkbox {
            width: 14px;
            height: 14px;
            margin-right: 8px;
            cursor: pointer;
        }
        .event-label {
            color: #b0b0b0;
            flex: 1;
        }
        .toggle-all-events {
            padding: 3px 8px;
            background-color: #2d2d30;
            border: 1px solid #444;
            border-radius: 3px;
            color: #d4d4d4;
            cursor: pointer;
            font-size: 11px;
            font-family: 'Courier New', Courier, monospace;
        }
        .toggle-all-events:hover {
            background-color: #3a3a3a;
        }
        .log-container {
            background-color: #252526;
            border: 1px solid #444;
            border-radius: 4px;
            flex: 1;
            overflow-y: auto;
            font-size: 13px;
        }
        .log-row {
            padding: 10px 15px;
            border-bottom: 1px solid #333;
            transition: background-color 0.2s;
        }
        .log-row.even {
            background-color: #2a2a2b;
        }
        .log-row.odd {
            background-color: #252526;
        }
        .log-row:hover {
            background-color: #2d2d30;
        }
        .log-summary {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            user-select: none;
        }
        .log-toggle {
            color: #888;
            font-size: 10px;
            width: 12px;
            display: inline-block;
        }
        .log-timestamp {
            color: #b0b0b0;
            font-size: 13px;
            min-width: 180px;
            font-weight: 500;
        }
        .log-level {
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
        }
        .log-level-info {
            background-color: #264f78;
            color: #4fc3f7;
        }
        .log-level-debug {
            background-color: #3a3a3a;
            color: #9e9e9e;
        }
        .log-level-warn, .log-level-warning {
            background-color: #5a4a1a;
            color: #ffc107;
        }
        .log-level-error {
            background-color: #5a1a1a;
            color: #f48771;
        }
        .log-message {
            color: #d4d4d4;
            flex: 1;
        }
        .log-data {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background-color: #1e1e1e;
            border-radius: 3px;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 12px;
            color: #9cdcfe;
            overflow-x: auto;
        }
        .log-row.expanded .log-data {
            display: block;
        }
        .log-parse-error {
            background-color: #5a1a1a;
            color: #f48771;
            padding: 10px 15px;
        }
        .error {
            color: #f48771;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>
            Frigbot Status:
            <span class="status-indicator {% if systemd_is_active %}active{% else %}inactive{% endif %}"></span>
        </h1>
        {% if systemd_is_active and systemd_start_time %}
        <div class="status-subhead">started at {{ systemd_start_time }} ({{ systemd_time_since }})</div>
        {% endif %}
        <a href="/" id="home-link" class="nav-link">‚Üê Back to Home</a>
    </div>
    <div class="main-content">
        <div class="left-sidebar">
            <div class="filter-section">
                <h3>Search</h3>
                <input type="text" id="search-input" class="search-box" placeholder="Filter logs...">
            </div>
            
            <div class="filter-section">
                <h3>Log Levels</h3>
                <label class="level-filter">
                    <input type="checkbox" class="level-checkbox" data-level="info" checked>
                    <span class="level-label log-level-info">INFO</span>
                </label>
                <label class="level-filter">
                    <input type="checkbox" class="level-checkbox" data-level="debug" checked>
                    <span class="level-label log-level-debug">DEBUG</span>
                </label>
                <label class="level-filter">
                    <input type="checkbox" class="level-checkbox" data-level="warn" checked>
                    <span class="level-label log-level-warn">WARN</span>
                </label>
                <label class="level-filter">
                    <input type="checkbox" class="level-checkbox" data-level="error" checked>
                    <span class="level-label log-level-error">ERROR</span>
                </label>
                <button class="clear-filters" id="clear-filters">Clear Filters</button>
            </div>
            
            <div class="filter-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <h3 style="margin-bottom: 0;">Event Types</h3>
                    <button class="toggle-all-events" id="toggle-all-events">Deselect All</button>
                </div>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="new_message" checked>
                    <span class="event-label">new_message</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="chat_requested" checked>
                    <span class="event-label">chat_requested</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="chat_api_request" checked>
                    <span class="event-label">chat_api_request</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="chat_api_response" checked>
                    <span class="event-label">chat_api_response</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="chat_completed" checked>
                    <span class="event-label">chat_completed</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="chat_usage" checked>
                    <span class="event-label">chat_usage</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="bot_starting" checked>
                    <span class="event-label">bot_starting</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="bot_started" checked>
                    <span class="event-label">bot_started</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="bot_crashed" checked>
                    <span class="event-label">bot_crashed</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="model_changed" checked>
                    <span class="event-label">model_changed</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="lol_init" checked>
                    <span class="event-label">lol_init</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="state_loaded" checked>
                    <span class="event-label">state_loaded</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="entering_main_loop" checked>
                    <span class="event-label">entering_main_loop</span>
                </label>
                <label class="event-filter">
                    <input type="checkbox" class="event-checkbox" data-event="message_error" checked>
                    <span class="event-label">message_error</span>
                </label>
            </div>
            
            <div class="filter-section">
                <h3>Stats</h3>
                <div class="stats-display">
                    <span id="visible-count">Visible: 0</span>
                    <span id="total-count">Total: 0</span>
                </div>
            </div>
        </div>
        <div class="log-container {% if error %}error{% endif %}">{{ log_content }}</div>
    </div>
    <script src="/static/js/frigbot.js"></script>
</body>
</html>

